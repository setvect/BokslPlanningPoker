# 대화 내용

플레닝 포커

```

플레닝포커가 먼지 알지?


최소한의 기능을 가지는 프레닝 포커를 만들려고 해. 기술 스택을 정하기 전에 기능 요구사항을 만들거야. 일딴 내가 생각한걸 두서없이 적었어. 네 의견을 줘. 서로 얘기하면서 기능을 구체화 시키자.

목적: 최대한 간단하게
- DBMS 이용 없음.
- 로그인 등 인증 없음.

기능 요구사항
- 카드댁 종류 하나(0, 1/2, 1, 2, 3, 5, 8, 13, 20, 40, 60, 100, ?, 커피)
- 방만들기
    - 방 이름 입력
- 방은 최대 10개를 만들 수 있음
- 한방에 들어 올 수 있는 인원은 최대 20명
- 방 접속 시 이름 입력
    - 입력한 이름은 쿠키에 저장
    - 방 접속 시 쿠키에 이름이 있으면 입력 하지 않음
- 본인 이름을 변경할 수 있는 기능 제공
- 1시간 동안 활동이 없는 방은 삭제
- 각자 카드를 하나를 선택
- 카드 오픈은 방에 있는 누구나 할 수 있음
- 자신이 오픈한 카드는 수정할 수 있음
- 각자 오픈한 카드의 평균을 계산하여 출력
  - 오픈하지 않은 카드, '?', '커피' 카드는 평균 계산에서 제외
- 방을 나가는 기능 제공
- 웹 페이지를 종료할때도 방을 나가는 효과
- 웹소켓을 이용해서 통신
- 방을 바로 접속할 수 있는 URL 제공

개발 요구사항
- docker를 활용한 빌드
- fly.io등 무료 호스팅 업체를 통해 서비스할 예정

```


```
@기술스택.md 를 참고로 해서 프로젝트를 초기화 할거야.
한번에 다 하지 말고 하나씩 단계별로 확인하면서 할거야.

어떻게 단계를 나눌까?
```


```
레이아웃 배치를 효율적으로 가져가고 싶어.
현재 모바일 환경에서 보면 세로 스크롤이 발생해.
한 화면에 참가자 카드, 선택 카드덱, 투표 결과를 모두 보여주고 싶어.
불필요한 공백 영역을 줄이는 방향으로 화면 효율성을 만들고 싶어.

일딴 소스코드를 수정하기 전에 어떻게 변경하면 좋을지 제안해줘.
```


```
그래도 여전히 문제가 계속되.
나는 이해가 안가는 부분이 있어.
로컬 PC에서 "npm run dev" 명령을 통해 서비스에 이상이 없는 상태야.
docker 빌드를 해서 실행했는데 문제가 발생했어.
그럼 문제를 해결하기 위해서는 docker 빌드 방식 또는 환경 설정 파일을 수정해야 되는거 아니야?

docker로 실행한 서비스가 문제가 있다고 해서 소스코드를 수정해서 해결 하려고 하는 게 이해가 가지 않어.
```

```
docker를 활용해서 빌드를 배포를 할거야.

우선 로컬PC에서 테스트를 할거야.

1. 전체적인 프로젝트 파악해줘.
2. docker 빌드 파일은 만들어줘.
3. 빌드, 실행 명령을 알려줘.
```


```
docker를 활용해서 빌드해 이미지를 만들어 컨테이너에 올려서 동작 테스트를 할거야.
인공지능 개발 보조도구와 협력해서 작업을 진행하다가 몇번 실패 했어.
최종 목표는 docker 설정 파일를 만들고 관련 명령어를 알려줘.

아래 조건으로 진행해줘.
1. 본 프로젝트를 전체적으로 파악해줘.
2. 최종 목표를 이루기 위해 단계별로 작업을 나눠죠. 각 단계가 정상 진행 여부를 판단할 수 있도록 확인할 수 있는 방법을 같이 알려줘.
3. 소스나 환경설정 파일은 네가 직접 만들어. 터미널 명령어를 알려주면 내가 직접 실행할게.

우선 단계만 알려줘. 내가 직접 단계 별로 확인해나가면서 진행할거야.
```

```
docker를 활용해서 빌드해 이미지를 만들어 컨테이너에 올려서 동작 테스트를 할거야.

아래 조건으로 진행해줘.
1. 본 프로젝트를 전체적으로 파악해줘.7
2. CI/CD 관련 작업은 하지마. 간단한 서비스라서 배포 자동화는 할 필요 없어. 원격 배포는 수동으로 진행할 거야.

docker 빌드를 하기전에 로컬 환경에서 체크해야될게 뭐가 있는지 말해줘.
그리고 우선 작업전에 네 계획을 알려줘.
```


```
프로젝트 실행에 문제가 있어.

client, server를 각각 실행시키고 클라이언트 URL http://localhost:5173/ 접속하면 기능이 정상 동작해.

하지만 빌드를 하고 server에서 `npm start`를 하고 나서 "http://localhost:3001/" 접속을 하면 일딴 메인화면은 로딩이 되.
하지만 방 만들기가 안되. 이름을 입력하고 방 입장이 안되는 문제가 있어.
그리고 시간이 좀 지나 브라우저 콘솔에 아래 에러 로그가 발생해.

직접 소스코드를 수정하지 말고, 일딴 문제 원인을 파악해줘.

```
react-dom.production.min.js:188 TypeError: Cannot read properties of undefined (reading 'length')
    at MainPage.tsx:185:37
    at Array.map (<anonymous>)
    at Ne (MainPage.tsx:174:27)

react-dom.production.min.js:282 Uncaught TypeError: Cannot read properties of undefined (reading 'length')
    at MainPage.tsx:185:37
    at Array.map (<anonymous>)
    at Ne (MainPage.tsx:174:27)


```
현재는 카드 크기가 고정되어 있어.
브라우저 넓이에 따라 카드크기와 안에 있는 글씨를 조절해줘.
하지만 무족건 키우면 안되. 그렇게 되면 불필요한 가로 스크롤이 생기는 문제가 있어.
가로 스크롤은 지금처럼 모바일 같은 화면 넓이가 적을때 표시되어야 해.
```


```
문제는 모두 해결 됐어. docker 빌드를 해서 컨테이너에 올려 정상 동작 하는거 확인했어.

여기서 질문.

docker 빌드 작업을 하기 위해 프로젝트 소스 코드를 수정했어.
- @tailwind.config.js
- @useSocket.ts
- @index.ts

도커 관련된 설정 파일을 만들거나 수정하는건 이해가 되는데 왜 프로젝트 소스코드를 수정을 해야 됐어.
docker 빌드 전에는 프로덕션 빌드를 하고 실행까지 해서 동작하는걸 확인했거든.
소스코드가 docker에 의존해서 변경된게 아닌지 궁금해서 질문하는거야?
```

## 온라인 타자 게임

플래닝 포커 서비스에 서브 기능을 하나 추가하고 싶어.
플래닝 포커와 직접 관련은 없는 온라인 타자 게임이야.
대기 시간에 사람들끼리 주어진 문장을 빨리 치는 사림이 이기는 작은 게임이라고 보면 돼.
90년대 PC 통신에서도 이런 게임이 있었어.

게임의 요구사항은 아래와 같아.

- 메인화면 타자 게임방 만들기. 활성화된 타자 게임방 목록 추가 (이 부분은 플래닝 포커 방만들기 목록 보여주기와 같은 방식이야)
- 사용자 이름은 플래닝 포커와 공유
- 타자게임 참여자중 한 명이 게임 시작을 누르면 게임 시작. 준비 시간 3초
- 정해진 문장이 랜덤으로 제시됨. 타자 문장은 별도의 파일로 관리함
- 타자방 게임 참가자들은 정해진 문장을 빨리 입력
- 이때 다른 참여자들의 타자 진행 상황을 보여줌
  - 참여자가 많아 화면 공간이 부족하면 일부만 보여줘도 됨.
  - 모바일 반응형 웹 전환시 다른 참여자 화면이 보여주지 않아도 됨.
- 오타가 발생하면 빨간색으로 오타 표시. 이때 한글은 완전한 글자가 입력 된 후 오타 체크
- 모든 문장을 입력하고 엔터를 누르면 입력 완료. 이때 오타가 하나 이상 있으면 완료가 되지 않음.
- 가장 빠르게 입력한 사람을 기준으로 5초후에 라운드 종료.
- 등수을 별도 화면 영역에 표시. 해당 등수는 다음 라운드까지 유지됨. 가장 빠르게 입력한 참여자가 있으면 등수 초기화.
- 복사 붙여 넣기 방지
  - 입력 input 창에 복사 붙여넣기 금지.
  - 제시한 문장에 띄어쓰기 공간에 임의의 특수 문자를 끼어 넣음. (한번에 제시된 문장을 복사할 수 없도록 하기 위함)


내가 제시한 요구사항을 기준으로 PRD를 만들거야. PRD를 만들기전에 나에게 질문할 내용 있어?


---

답변을 줄게.

1. 방 인원 제한: 플래닝 포커 처럼 20명으로 동일하게 유지
2. 최소 인원: 혼자서도 연습 게임 참여 가능하게
3. 라운드 시스템: 연속 라운드. 라운드 수 제한은 없어.
4. 중도 참여: 다음 라운드부터 참여가능
5. 문장 길이: 50자 이내로 제시할 거야. 문장 데이터는 내가 따로 수집해서 채워 넣을게. 너는 샘플로 만들어줘.
6. 문장 언어: 한글, 영어 모두 있어.
7. 문장 반복 방지: 같은 방에서 연속적으로 같은 문장이 나오지 않도록 해줘. 단 예를 들어문장 데이터가 10개인데 10 라운드가 초과 되면 다시 랜덤하게 문장이 제시됨
8. 타이핑 진행 상황 표시: 실제 입력중인 텍스트가 표시. 대충 알아 볼 수 있을 정도로 작게 표시 해도 됨.
9. 결과 화면: 순위만 표시. 정확도는 의미가 없어. 100% 정확하지 않으면 입력을 완료할수 없잖아.
10. 방 자동 정리: 플래닝 포커 처럼 비활성화 해줘.
11. 네비게이션: 한 화면에 두 섹션 모두 표시

---

1. 라운드 종료 조건: 제한 시간 없어. 아무도 완료를 하지 못하면 계속해서 유지
2. 다음 라운드 시작: 상황에 대해서 설명할게
   - 최초 게임시작: 3초 대기
   - 문장 제시
   - 1등으로 입력: 5초 대기. 이때 다른 참여자 입력 완료도 받음. 2, 3, 4, 5, ... 등수를 정하는 목적
3. 게임종료: 게임중 아무때나 나갈 수 있음.
4. 방 나가기: 해당 라운드드 자동 탈락. 쉽게 말해 없는 사람으로 생각하면 됨.
5. 특수 문자 표시: 당연히 사용자는 일반 스페이스바로 입력해야지.

더 궁금한거 있어?