# 대화 내용

플레닝 포커

```

플레닝포커가 먼지 알지?


최소한의 기능을 가지는 프레닝 포커를 만들려고 해. 기술 스택을 정하기 전에 기능 요구사항을 만들거야. 일딴 내가 생각한걸 두서없이 적었어. 네 의견을 줘. 서로 얘기하면서 기능을 구체화 시키자.

목적: 최대한 간단하게 
- DBMS 이용 없음.
- 로그인 등 인증 없음.

기능 요구사항
- 카드댁 종류 하나(0, 1/2, 1, 2, 3, 5, 8, 13, 20, 40, 60, 100, ?, 커피)
- 방만들기
    - 방 이름 입력
- 방은 최대 10개를 만들 수 있음
- 한방에 들어 올 수 있는 인원은 최대 20명
- 방 접속 시 이름 입력
    - 입력한 이름은 쿠키에 저장
    - 방 접속 시 쿠키에 이름이 있으면 입력 하지 않음
- 본인 이름을 변경할 수 있는 기능 제공
- 1시간 동안 활동이 없는 방은 삭제 
- 각자 카드를 하나를 선택
- 카드 오픈은 방에 있는 누구나 할 수 있음
- 자신이 오픈한 카드는 수정할 수 있음
- 각자 오픈한 카드의 평균을 계산하여 출력
  - 오픈하지 않은 카드, '?', '커피' 카드는 평균 계산에서 제외
- 방을 나가는 기능 제공
- 웹 페이지를 종료할때도 방을 나가는 효과 
- 웹소켓을 이용해서 통신
- 방을 바로 접속할 수 있는 URL 제공

개발 요구사항
- docker를 활용한 빌드 
- fly.io등 무료 호스팅 업체를 통해 서비스할 예정

```


```
@기술스택.md 를 참고로 해서 프로젝트를 초기화 할거야. 
한번에 다 하지 말고 하나씩 단계별로 확인하면서 할거야.

어떻게 단계를 나눌까?
```


```
레이아웃 배치를 효율적으로 가져가고 싶어.
현재 모바일 환경에서 보면 세로 스크롤이 발생해.
한 화면에 참가자 카드, 선택 카드덱, 투표 결과를 모두 보여주고 싶어.
불필요한 공백 영역을 줄이는 방향으로 화면 효율성을 만들고 싶어.

일딴 소스코드를 수정하기 전에 어떻게 변경하면 좋을지 제안해줘.
```


```
그래도 여전히 문제가 계속되.
나는 이해가 안가는 부분이 있어.
로컬 PC에서 "npm run dev" 명령을 통해 서비스에 이상이 없는 상태야.
docker 빌드를 해서 실행했는데 문제가 발생했어.
그럼 문제를 해결하기 위해서는 docker 빌드 방식 또는 환경 설정 파일을 수정해야 되는거 아니야?

docker로 실행한 서비스가 문제가 있다고 해서 소스코드를 수정해서 해결 하려고 하는 게 이해가 가지 않어.
```

```
docker를 활용해서 빌드를 배포를 할거야.

우선 로컬PC에서 테스트를 할거야.

1. 전체적인 프로젝트 파악해줘.
2. docker 빌드 파일은 만들어줘.
3. 빌드, 실행 명령을 알려줘.
```


```
docker를 활용해서 빌드해 이미지를 만들어 컨테이너에 올려서 동작 테스트를 할거야.
인공지능 개발 보조도구와 협력해서 작업을 진행하다가 몇번 실패 했어. 
최종 목표는 docker 설정 파일를 만들고 관련 명령어를 알려줘.

아래 조건으로 진행해줘.
1. 본 프로젝트를 전체적으로 파악해줘.
2. 최종 목표를 이루기 위해 단계별로 작업을 나눠죠. 각 단계가 정상 진행 여부를 판단할 수 있도록 확인할 수 있는 방법을 같이 알려줘.
3. 소스나 환경설정 파일은 네가 직접 만들어. 터미널 명령어를 알려주면 내가 직접 실행할게.

우선 단계만 알려줘. 내가 직접 단계 별로 확인해나가면서 진행할거야.
```

```
docker를 활용해서 빌드해 이미지를 만들어 컨테이너에 올려서 동작 테스트를 할거야.

아래 조건으로 진행해줘.
1. 본 프로젝트를 전체적으로 파악해줘.7
2. CI/CD 관련 작업은 하지마. 간단한 서비스라서 배포 자동화는 할 필요 없어. 원격 배포는 수동으로 진행할 거야.

docker 빌드를 하기전에 로컬 환경에서 체크해야될게 뭐가 있는지 말해줘.
그리고 우선 작업전에 네 계획을 알려줘.
```


```
프로젝트 실행에 문제가 있어.

client, server를 각각 실행시키고 클라이언트 URL http://localhost:5173/ 접속하면 기능이 정상 동작해.

하지만 빌드를 하고 server에서 `npm start`를 하고 나서 "http://localhost:3001/" 접속을 하면 일딴 메인화면은 로딩이 되.
하지만 방 만들기가 안되. 이름을 입력하고 방 입장이 안되는 문제가 있어.
그리고 시간이 좀 지나 브라우저 콘솔에 아래 에러 로그가 발생해.

직접 소스코드를 수정하지 말고, 일딴 문제 원인을 파악해줘.

```
react-dom.production.min.js:188 TypeError: Cannot read properties of undefined (reading 'length')
    at MainPage.tsx:185:37
    at Array.map (<anonymous>)
    at Ne (MainPage.tsx:174:27)

react-dom.production.min.js:282 Uncaught TypeError: Cannot read properties of undefined (reading 'length')
    at MainPage.tsx:185:37
    at Array.map (<anonymous>)
    at Ne (MainPage.tsx:174:27)


```
현재는 카드 크기가 고정되어 있어.
브라우저 넓이에 따라 카드크기와 안에 있는 글씨를 조절해줘.
하지만 무족건 키우면 안되. 그렇게 되면 불필요한 가로 스크롤이 생기는 문제가 있어.
가로 스크롤은 지금처럼 모바일 같은 화면 넓이가 적을때 표시되어야 해.
```


```
문제는 모두 해결 됐어. docker 빌드를 해서 컨테이너에 올려 정상 동작 하는거 확인했어.

여기서 질문.

docker 빌드 작업을 하기 위해 프로젝트 소스 코드를 수정했어.
- @tailwind.config.js 
- @useSocket.ts 
- @index.ts 

도커 관련된 설정 파일을 만들거나 수정하는건 이해가 되는데 왜 프로젝트 소스코드를 수정을 해야 됐어. 
docker 빌드 전에는 프로덕션 빌드를 하고 실행까지 해서 동작하는걸 확인했거든.
소스코드가 docker에 의존해서 변경된게 아닌지 궁금해서 질문하는거야?
```